import type { TCoinConfig } from '../types';

export const scalpingPreset: TCoinConfig = {
  symbol: 'SCALPING',
  isActive: true,
  analysisConfig: {
    candleTimeframe: '1m',
    oiWindow: 13,
    liqWindow: 13,
    liqSentWindow: 5,
    fundingWindow: 15,
    volWindow: 10,
    corrWindow: 8,
    longShortWindow: 8,
    higherMA: {
      timeframe: '4h',
      maShort: 5,
      maLong: 10,
      type: 'EMA',
      thresholdPct: 0.1,
      scale: 8,
      emaSeed: 'first',
    },
    weights: {
      trend: 0.25,
      trendRegime: 0.08,
      liquidity: 0.28,
      funding: 0.04,
      liquidations: 0.25,
      openInterest: 0.7,
      correlation: 0.02,
      longShort: 0.01,
      higherMA: 0.0,
    },
    moduleThresholds: {
      trend: 15,
      trendRegime: 10,
      liquidity: 5,
      funding: 10,
      liquidations: 5,
      openInterest: 10,
      correlation: 8,
      longShort: 8,
      higherMA: 5,
    },
  },
  strategy: {
    entry: {
      minScore: { LONG: 30, SHORT: 30 },
      minModules: 2,
      requiredModules: ['liquidity', 'liquidations'],
      maxSpreadPct: 0.02,
      cooldownMin: 2,
      avoidWhen: { volatility: 'DEAD', fundingExtreme: { absOver: 0.08 } },
      sideBiasTolerance: 3,
    },
    volatilityFilter: { deadBelow: 0.15, extremeAbove: 4.0 },
    capital: {
      account: 100,
      riskPerTradePct: 2,
      leverage: 20,
      maxConcurrentPositions: 3,
    },
    sizing: { maxAdds: 0, addOnAdverseMovePct: 0.3, addMultiplier: 1 },
    exits: {
      oppositeCountExit: 0,
      tp: { use: true, tpGridPct: [0.5, 1.0], tpGridSizePct: [70, 30] },
      sl: {
        type: 'hard',
        hardPct: 0.7,
        atrMult: 0.5,
        signalRules: {
          flipIf: { scoreGap: 15, minOppScore: 55 },
          moduleFail: { required: ['liquidity'] },
        },
      },
      time: { maxHoldMin: 5, noPnLFallback: 'closeSmallLoss' },
      trailing: { use: false, startAfterPct: 0, trailStepPct: 0 },
    },
  },
};
